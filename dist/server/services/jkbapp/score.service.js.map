{"version":3,"sources":["server/services/jkbapp/score.service.js"],"names":["userId","get","user","score","getScores","userid","ipfsData","hash","ipfsHash","create","newScore","taskType","getScoreByTaskType","addScore","oldScore","parseInt","console","log","mobileNumber","findByIdAndUpdate","_id","$set","update","pageSize","page","looked","countByUserId","total","getList","scoreLogs","pagination","Number","current","result","list","getScoreLogs","order","scorelist","todayStartDate","getDayStartDate","getRankingAndCreatedDateGrateBy","getRanking","map","item","index","name","nickname","username","mobile","Promise","all","getScoreRanking","scoreLogId","lookScoreLog","resultBody","error","scoreType","scoreResultBody","message","scoreLogIds","scoreLogsTemp","scoresTemp","scores","totalScore","reduce","previousValue","currentValue","lookScoreLogs","getScoreLogInfoById","aa"],"mappings":"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","file":"score.service.js","sourceRoot":"../../../../../../.."}