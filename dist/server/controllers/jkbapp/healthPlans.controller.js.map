{"version":3,"sources":["server/controllers/jkbapp/healthPlans.controller.js"],"names":["req","res","query","pageSize","page","list","healthPlans","json","planId","params","userId","getByUserIdAndPlanId","userPlan","delete","continueStep","timeStamp","Date","setHours","createdDateTimestamp","createdDate","getTime","finish","getByStep","healthPlanItem","ipfsHash","content","updateParam","findOneAndUpdate","$set","err","console","log","getPlanItemInfo","next","ipfsData","then","hash","healthUserPlan","save","catch","e","userPlanContract","addUserPlan","updateJoinNumByPlanId","undefined","joinPlan","deleteUserPlan","removePlan","plans","getByUserId","userPlans","data","userJoinList","userNotJoinList","map","plan","checkHashExist","_id","toString","push","getPlanList","newHealthUserPlan","taskType","create","get","healthPlan","healthPlanContent","JSON","parse","cycleDay","remarkContinueStep","load","id","buffer","detail","name","body","introduce","listImg","item","joinNum","createItem","step"],"mappings":"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","file":"healthPlans.controller.js","sourceRoot":"../../../../../../.."}